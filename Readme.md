# 사물함 관리 소켓 프로그램
소켓 통신을 통해 다중 사물함을 관리할 수 있는 서버/클라이언트 구조 예시입니다.
클라이언트는 키오스크처럼 메뉴 선택을 통해 서버에 요청을 보내고, 서버는 파일(락 파일)을 사용하여 사물함 상태(비밀번호, 물건 등)를 저장/수정/조회

---

## 파일 구성

### `client.c`
- 유닉스 도메인 소켓(`AF_UNIX`)으로 서버에 연결
- 메뉴(1~6)를 통해 사물함 **상태 확인**, **등록**, **물품 보관**, **물품 회수**, **비밀번호 초기화(관리자 호출)** 등 요청
- 서버 응답을 받아 화면에 출력

### `server.c`
- **유닉스 도메인 소켓 서버** 구현
- 실행 시 사물함 개수를 입력받아, 구조체 배열(`loc* locker_array`) 초기화 및 파일로 상태 저장
- 클라이언트 연결 시 `fork()`로 프로세스 분기 → 요청 처리
- 각 사물함 번호/비밀번호/사용 여부/보관 물건 정보 등을 파일(`lock_information`)에 읽고 쓰며 관리

---

## 동작 흐름

### 1. 서버 실행 (`server.c`)
1. `socket(AF_UNIX, SOCK_STREAM, 0)` → `bind()` → `listen()` 과정을 통해 소켓 대기 상태 진입
2. 사용자로부터 **사물함 개수**를 입력받아 배열(`locker_array`)을 초기화 (`reset()`) 후 파일(`lock_information`)에 저장 (`save_all()`)
3. **무한 루프**에서 `accept()`로 클라이언트 연결을 받음
4. 연결 시, `fork()`로 자식 프로세스를 생성 → 클라이언트와 통신
   - 비밀번호 확인, 사물함 등록, 물품 보관/회수, 관리자 호출(비밀번호 초기화) 등 로직 처리
   - 처리 후 사물함 정보를 파일에 반영(`loc_updatefile()` or `save_all()`)
   - 클라이언트가 종료되면 해당 자식 프로세스도 종료

### 2. 클라이언트 실행 (`client.c`)
1. `socket(AF_UNIX, SOCK_STREAM, 0)` 후 `connect()`로 서버에 연결
2. 서버에서 **사물함 개수**(`count`)를 먼저 전송받아 저장
3. 메뉴 표시  
   **1.** 사물함 사용 여부 조회 (`show()`)  
   **2.** 사물함 등록 (사물함 번호, 비밀번호 설정)  
   **3.** 물품 보관 (등록된 사물함 + 비밀번호 일치 시 가능)  
   **4.** 물품 회수 (비밀번호 일치 시 회수 후 사물함 ‘사용 가능’ 상태로 변경)  
   **5.** 관리자 호출 (비밀번호 초기화 등)  
   **6.** 프로그램 종료  
4. 선택한 메뉴 번호를 서버로 전송하고, 필요한 정보(사물함 번호, 비밀번호, 물품 이름 등)를 추가 입력
5. 서버로부터 처리 결과(성공/실패, 사용 여부 등)를 수신하여 화면에 출력
